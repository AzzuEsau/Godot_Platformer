[gd_scene load_steps=24 format=3 uid="uid://cfiauul37qbfp"]

[ext_resource type="Texture2D" uid="uid://bei7x67psb4c4" path="res://media/sprites/mainCharacters/Mask Dude.png" id="1_1delc"]
[ext_resource type="Script" path="res://scripts/entity/player/Player.cs" id="1_7enpc"]
[ext_resource type="PackedScene" uid="uid://dofv1uqb3rn0k" path="res://prefabs/states/finiteStateMachine.tscn" id="2_n7yf3"]
[ext_resource type="Script" path="res://scripts/entity/player/Camera.cs" id="2_vxym5"]
[ext_resource type="PackedScene" uid="uid://d3s5eqyxp45fi" path="res://prefabs/components/lifeComponent.tscn" id="4_gr0ff"]
[ext_resource type="PackedScene" uid="uid://wu3jlxedbqak" path="res://prefabs/components/hurtableComponent.tscn" id="5_i3uxq"]
[ext_resource type="PackedScene" uid="uid://djq2715q03rxw" path="res://prefabs/components/damageableComponent.tscn" id="6_owg8j"]
[ext_resource type="Script" path="res://scripts/states/player/PlayerIdle.cs" id="8_eb5op"]
[ext_resource type="AudioStream" uid="uid://ba2hxqf376lg" path="res://media/sounds/Jump.ogg" id="9_asgkw"]
[ext_resource type="Script" path="res://scripts/states/player/PlayerMoving.cs" id="9_srhf6"]
[ext_resource type="AudioStream" uid="uid://bk01bmd5p2v58" path="res://media/sounds/Hit.ogg" id="10_ht6te"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vsclm"]
size = Vector2(11, 23)

[sub_resource type="Animation" id="Animation_wfvjh"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("playerSprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}

[sub_resource type="Animation" id="Animation_tj7go"]
resource_name = "fall"
length = 0.1
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("playerSprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [24]
}

[sub_resource type="Animation" id="Animation_elbwa"]
resource_name = "hurt"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("playerSprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [37, 38, 39, 40, 41, 42, 43, 43]
}

[sub_resource type="Animation" id="Animation_vy45s"]
resource_name = "idle"
length = 1.1
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("playerSprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 1, 2, 3, 4, 5, 6, 7, 8, 10]
}

[sub_resource type="Animation" id="Animation_yvmsy"]
resource_name = "jump"
length = 0.1
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("playerSprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [23]
}

[sub_resource type="Animation" id="Animation_xbe8m"]
resource_name = "walk"
length = 1.3
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("playerSprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ccumr"]
_data = {
"RESET": SubResource("Animation_wfvjh"),
"fall": SubResource("Animation_tj7go"),
"hurt": SubResource("Animation_elbwa"),
"idle": SubResource("Animation_vy45s"),
"jump": SubResource("Animation_yvmsy"),
"walk": SubResource("Animation_xbe8m")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_h0oc2"]
size = Vector2(13, 3)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_unyoh"]
size = Vector2(16, 17)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_j0nye"]
bg_color = Color(0.152941, 0.152941, 0.152941, 0.666667)
corner_radius_top_left = 5
corner_radius_bottom_right = 5

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_3sn7b"]
bg_color = Color(0.898039, 0.54902, 0.254902, 1)
border_width_bottom = 2
border_color = Color(0.709804, 0.407843, 0.133333, 1)
corner_radius_top_left = 5
corner_radius_bottom_right = 5

[node name="player" type="CharacterBody2D" node_paths=PackedStringArray("animator", "sprite", "audioHurt", "finiteStateMachine", "idleState", "movingState", "fruitsLabel", "hpBar", "hurtableComponent", "lifeComponent") groups=["Player"]]
collision_layer = 2
collision_mask = 28
script = ExtResource("1_7enpc")
animator = NodePath("playerAnimation")
sprite = NodePath("playerSprite")
audioHurt = NodePath("Audios/AudioHurt")
finiteStateMachine = NodePath("StateMachine")
idleState = NodePath("StateMachine/IdleState")
movingState = NodePath("StateMachine/MovingState")
fruitsLabel = NodePath("playerGUI/fruitsLabel")
hpBar = NodePath("playerGUI/hpProgressBar")
hurtableComponent = NodePath("Components/hurtableComponent")
lifeComponent = NodePath("Components/lifeComponent")
metadata/_edit_group_ = true

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(2, 2)
script = ExtResource("2_vxym5")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0.5, 4.5)
shape = SubResource("RectangleShape2D_vsclm")

[node name="playerSprite" type="Sprite2D" parent="."]
z_index = 1
texture = ExtResource("1_1delc")
hframes = 11
vframes = 4
frame = 1

[node name="playerAnimation" type="AnimationPlayer" parent="."]
autoplay = "idle"
libraries = {
"": SubResource("AnimationLibrary_ccumr")
}

[node name="Components" type="Node2D" parent="."]

[node name="lifeComponent" parent="Components" node_paths=PackedStringArray("parentNode", "animationPlayer") instance=ExtResource("4_gr0ff")]
maxLife = 50.0
parentNode = NodePath("../..")
isHurtAnimationExits = true
animationPlayer = NodePath("../../playerAnimation")

[node name="hurtableComponent" parent="Components" instance=ExtResource("5_i3uxq")]
collision_layer = 0
collision_mask = 32
damageAmount = 10

[node name="CollisionShape2D" type="CollisionShape2D" parent="Components/hurtableComponent"]
position = Vector2(0.5, 17.5)
shape = SubResource("RectangleShape2D_h0oc2")
debug_color = Color(0.996078, 0, 0.168627, 0.419608)

[node name="damageableComponent" parent="Components" node_paths=PackedStringArray("lifeComponent", "parent") instance=ExtResource("6_owg8j")]
collision_layer = 2
collision_mask = 0
lifeComponent = NodePath("../lifeComponent")
parent = NodePath("../..")
invulnerableExtraTime = 1.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Components/damageableComponent"]
position = Vector2(0, 7.5)
shape = SubResource("RectangleShape2D_unyoh")
debug_color = Color(0.345098, 0.486275, 1, 0.419608)
metadata/_edit_group_ = true

[node name="StateMachine" parent="." node_paths=PackedStringArray("initialState") instance=ExtResource("2_n7yf3")]
initialState = NodePath("IdleState")

[node name="IdleState" type="Node" parent="StateMachine" node_paths=PackedStringArray("player", "animator")]
script = ExtResource("8_eb5op")
player = NodePath("../..")
animator = NodePath("../../playerAnimation")

[node name="MovingState" type="Node" parent="StateMachine" node_paths=PackedStringArray("player", "animator", "sprite", "audioJump")]
script = ExtResource("9_srhf6")
player = NodePath("../..")
animator = NodePath("../../playerAnimation")
sprite = NodePath("../../playerSprite")
audioJump = NodePath("../../Audios/AudioJump")

[node name="Audios" type="Node2D" parent="."]

[node name="AudioJump" type="AudioStreamPlayer2D" parent="Audios"]
stream = ExtResource("9_asgkw")

[node name="AudioHurt" type="AudioStreamPlayer2D" parent="Audios"]
stream = ExtResource("10_ht6te")

[node name="playerGUI" type="CanvasLayer" parent="."]

[node name="fruitsLabel" type="Label" parent="playerGUI"]
offset_left = 16.0
offset_top = 53.0
offset_right = 170.0
offset_bottom = 108.0
text = "FRUTAS: 0
"

[node name="hpProgressBar" type="ProgressBar" parent="playerGUI"]
offset_left = 16.0
offset_top = 18.0
offset_right = 288.0
offset_bottom = 45.0
theme_override_styles/background = SubResource("StyleBoxFlat_j0nye")
theme_override_styles/fill = SubResource("StyleBoxFlat_3sn7b")
value = 50.0
show_percentage = false
